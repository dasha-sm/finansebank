# Firebase - Визуальное руководство 📊

## Схема процесса настройки

```
┌─────────────────────────────────────────────────────────────┐
│                    НАСТРОЙКА FIREBASE                       │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ШАГ 1: СОЗДАНИЕ ПРОЕКТА                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 1. Открыть console.firebase.google.com              │   │
│  │ 2. Нажать "Добавить проект"                         │   │
│  │ 3. Ввести название: "Finanse MDK"                   │   │
│  │ 4. Отключить Analytics (опционально)                │   │
│  │ 5. Нажать "Создать проект"                          │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ШАГ 2: ДОБАВЛЕНИЕ ANDROID ПРИЛОЖЕНИЯ                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ Firebase Console → ⚙️ Настройки проекта              │   │
│  │                    ↓                                 │   │
│  │ Добавить приложение → Android                        │   │
│  │                    ↓                                 │   │
│  │ Package name: com.finanse.mdk                        │   │
│  │                    ↓                                 │   │
│  │ Зарегистрировать приложение                          │   │
│  │                    ↓                                 │   │
│  │ Скачать google-services.json                         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ФАЙЛОВАЯ СТРУКТУРА:                                  │   │
│  │                                                       │   │
│  │ finanse-mdk/                                         │   │
│  │ └── app/                                             │   │
│  │     ├── google-services.json  ← СЮДА!                │   │
│  │     ├── build.gradle.kts                            │   │
│  │     └── ...                                          │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ШАГ 3: ВКЛЮЧЕНИЕ AUTHENTICATION                            │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ Firebase Console → Authentication                   │   │
│  │                    ↓                                 │   │
│  │ Нажать "Начать" (если первый раз)                    │   │
│  │                    ↓                                 │   │
│  │ Вкладка "Способы входа"                              │   │
│  │                    ↓                                 │   │
│  │ Найти "Пароль" (Email/Password)                      │   │
│  │                    ↓                                 │   │
│  │ Включить → Сохранить                                 │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ШАГ 4: СОЗДАНИЕ FIRESTORE                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ Firebase Console → Firestore Database               │   │
│  │                    ↓                                 │   │
│  │ Нажать "Создать базу данных"                        │   │
│  │                    ↓                                 │   │
│  │ Выбрать "Режим тестирования"                        │   │
│  │                    ↓                                 │   │
│  │ Выбрать регион (europe-west)                        │   │
│  │                    ↓                                 │   │
│  │ Нажать "Включить"                                    │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  ШАГ 5: ПРОВЕРКА В ANDROID STUDIO                          │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 1. File → Sync Project with Gradle Files            │   │
│  │ 2. Build → Clean Project                            │   │
│  │ 3. Build → Rebuild Project                          │   │
│  │ 4. Запустить приложение                             │   │
│  │ 5. Попробовать зарегистрироваться                   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
                        ✅ ГОТОВО!
```

## Структура Firebase проекта после настройки

```
Firebase Console
│
├── Authentication
│   └── Способы входа
│       └── ✅ Пароль (Email/Password) - ВКЛЮЧЕН
│
├── Firestore Database
│   ├── Данные (пока пусто)
│   ├── Правила (настроены)
│   └── Индексы (автоматически)
│
└── Настройки проекта
    └── Ваши приложения
        └── Android (com.finanse.mdk)
            └── google-services.json (скачан)
```

## Структура Android проекта

```
finanse-mdk/
│
├── app/
│   ├── google-services.json  ← Firebase конфигурация
│   ├── build.gradle.kts       ← Плагин google-services уже добавлен
│   └── src/
│       └── main/
│           └── java/com/finanse/mdk/
│               ├── data/repository/
│               │   ├── AuthRepository.kt      ← Использует Firebase Auth
│               │   └── TransactionRepository.kt ← Использует Firestore
│               └── ...
│
└── build.gradle.kts
    └── Плагин com.google.gms.google-services уже добавлен
```

## Проверка правильности настройки

### ✅ В Firebase Console должно быть:

1. **Проект создан**
   - Название: "Finanse MDK" (или ваше)
   - Статус: Активен

2. **Android приложение добавлено**
   - Package name: `com.finanse.mdk`
   - SHA-1: (опционально, для тестирования)

3. **Authentication включен**
   - Email/Password: ✅ Включено

4. **Firestore создан**
   - Режим: Тестирование (или Продакшен)
   - Регион: Выбран

### ✅ В Android Studio должно быть:

1. **google-services.json**
   - Путь: `app/google-services.json`
   - Содержит правильный package name

2. **Плагин добавлен**
   ```kotlin
   // app/build.gradle.kts
   plugins {
       id("com.google.gms.google-services")  ← Есть
   }
   ```

3. **Зависимости добавлены**
   ```kotlin
   // app/build.gradle.kts
   dependencies {
       implementation(platform("com.google.firebase:firebase-bom:32.7.0"))
       implementation("com.google.firebase:firebase-auth-ktx")
       implementation("com.google.firebase:firebase-firestore-ktx")
   }
   ```

4. **Проект синхронизирован**
   - Нет ошибок в Gradle
   - Все зависимости загружены

## Типичные ошибки и решения

| Ошибка | Причина | Решение |
|--------|---------|---------|
| `google-services.json not found` | Файл не в папке `app/` | Переместить файл в `app/` |
| `Package name mismatch` | Не совпадает package name | Проверить в `build.gradle.kts` и `google-services.json` |
| `FirebaseApp not initialized` | Плагин не применен | Добавить плагин в `build.gradle.kts` |
| `Authentication failed` | Провайдер не включен | Включить Email/Password в Console |
| `Permission denied` | Неправильные правила Firestore | Настроить правила безопасности |

## Следующие шаги после настройки

1. ✅ Запустить приложение
2. ✅ Зарегистрировать тестового пользователя
3. ✅ Проверить в Firebase Console → Authentication → Users
4. ✅ Добавить операцию в приложении
5. ✅ Проверить в Firebase Console → Firestore → Данные

---

**Подробные инструкции**: См. `FIREBASE_SETUP.md`  
**Быстрый старт**: См. `FIREBASE_QUICK_START.md`





