# Техническое задание (ТЗ) для мобильного приложения FinanceFlow

## 1. Краткое описание проекта (суть)

**Название мобильного приложения:** FinanceFlow

**Описание:** FinanceFlow — это мобильное приложение для персонального учета финансов, которое позволяет пользователям отслеживать доходы и расходы, управлять бюджетами, ставить финансовые цели и анализировать свои траты. Приложение поддерживает офлайн-режим работы, обеспечивает безопасное хранение данных и предоставляет администраторам инструменты для управления системными категориями и пользователями.

**Цель:** Создание удобного и безопасного мобильного приложения для управления личными финансами, которое поможет пользователям контролировать свои расходы, планировать бюджет и достигать финансовых целей.

**Аналоги:** MoneyLover, Дзен-мани, CoinKeeper, Wallet

**Дата сдачи:** 25.12.2025

---

## 2. Основные требования (Функциональные)

### 2.1. Пользовательские роли

**Пользователь (User):**
- Регистрация / вход в аккаунт
- Добавление, редактирование и удаление транзакций (доходы/расходы)
- Создание и управление пользовательскими категориями
- Просмотр статистики по доходам и расходам
- Управление бюджетами
- Создание и отслеживание финансовых целей
- Просмотр баланса и истории операций
- Настройка профиля (PIN-код, биометрическая аутентификация)
- Резервное копирование данных в облако
- Работа в офлайн-режиме

**Администратор (Admin):**
- Управление пользователями (просмотр списка, блокировка/разблокировка, удаление)
- Управление системными категориями (создание, редактирование, удаление)
- Просмотр агрегированной статистики по всем пользователям
- Сброс паролей пользователей
- Модерация контента

### 2.2. Базовый функционал (MVP)

**Аутентификация:**
- Регистрация по email / пароль
- Вход в аккаунт
- Восстановление пароля через email
- PIN-код для дополнительной защиты
- Биометрическая аутентификация (FaceID/TouchID)

**Управление транзакциями:**
- Добавление доходов и расходов
- Выбор категории из системных или пользовательских
- Указание суммы, даты и описания
- Просмотр истории транзакций
- Удаление транзакций
- Фильтрация по дате и категории

**Управление категориями:**
- Просмотр системных категорий (доступны всем пользователям)
- Создание пользовательских категорий
- Редактирование и удаление пользовательских категорий
- Разделение на категории доходов и расходов

**Статистика и аналитика:**
- Отображение общего баланса
- Статистика доходов и расходов
- Расходы по категориям с названиями категорий
- Фильтрация по периодам (неделя, месяц, год)
- Визуализация данных

**Бюджеты:**
- Создание бюджетов на категории или общий бюджет
- Установка лимита и периода
- Отслеживание использования бюджета

**Финансовые цели:**
- Создание финансовых целей с указанием суммы и срока
- Отслеживание прогресса достижения цели
- Пополнение цели
- Отображение активных целей на главном экране

**Профиль пользователя:**
- Просмотр и редактирование данных аккаунта
- Настройка PIN-кода
- Включение/выключение биометрической аутентификации
- Выход из аккаунта

**Синхронизация:**
- Автоматическая синхронизация данных с Firebase
- Резервное копирование в облако
- Восстановление данных из облака

**Офлайн-режим:**
- Работа приложения без интернета
- Локальное хранение данных в зашифрованной базе данных
- Автоматическая синхронизация при появлении интернета

**Админ-панель:**
- Управление пользователями (блокировка, разблокировка, удаление)
- Управление системными категориями (CRUD операции)
- Просмотр агрегированной статистики
- Сброс паролей пользователей

### 2.3. Нефункциональные требования

**Производительность:**
- Время отклика UI: <200 ms на основные экраны
- Плавная анимация переходов (60 FPS)
- Оптимизация работы с базой данных

**Безопасность:**
- Шифрование локальной базы данных (SQLCipher)
- Безопасное хранение PIN-кода
- HTTPS для всех сетевых запросов
- Валидация входных данных
- Защита от SQL-инъекций

**Конфиденциальность:**
- Возможность удаления учётной записи и персональных данных
- Соблюдение политики конфиденциальности
- Минимизация сбора данных

**Локализация:**
- Русский интерфейс
- Форматирование валюты в рублях
- Форматирование дат в российском формате

**Доступность:**
- Адаптивный дизайн для разных размеров экранов
- Крупные кнопки и элементы управления
- Поддержка Material Design 3
- Четкая типографика

**Надежность:**
- Обработка ошибок без крашей приложения
- Восстановление после сбоев
- Логирование ошибок для отладки

---

## 3. Предложенный стек технологий

**Frontend (мобильное приложение):**
- Язык программирования: Kotlin 1.9+
- Платформа: Android 8.0+ (API 26+)
- UI Framework: Jetpack Compose
- Архитектура: MVVM (Model-View-ViewModel)
- DI: Dagger Hilt
- Асинхронность: Kotlin Coroutines & Flow

**Backend as a Service (BaaS):**
- Firebase Authentication (аутентификация)
- Firebase Firestore (облачная база данных)
- Firebase Cloud Storage (хранение файлов, опционально)

**Локальное хранение данных:**
- Room Persistence Library (SQLite)
- SQLCipher (шифрование базы данных)

**Дополнительные библиотеки:**
- MPAndroidChart (графики и диаграммы)
- Material Design 3 (UI компоненты)
- Biometric API (биометрическая аутентификация)

**Инструменты разработки:**
- IDE: Android Studio
- Контроль версий: Git + GitHub
- Система сборки: Gradle

---

## 4. Рекомендуемые инструменты разработки

**IDE:** Android Studio (последняя стабильная версия)

**UI/UX:**
- Material Design 3 — разработка UI компонентов
- Jetpack Compose — декларативный UI
- Material Icons — иконки

**Управление версиями:**
- Git — система контроля версий
- GitHub — хранение исходного кода, управление версиями

**Тестирование:**
- JUnit — unit-тестирование
- Espresso — UI-тестирование
- Mockito — моки для тестирования

---

## 5. Архитектура и данные

### 5.1. Архитектурная схема

```
Мобильное приложение (Android/Kotlin)
    ↓
MVVM Architecture
    ↓
Repository Layer (Local + Remote)
    ↓
┌─────────────────┬──────────────────┐
│  Room Database  │  Firebase        │
│  (SQLCipher)   │  (Firestore)     │
└─────────────────┴──────────────────┘
```

**Описание:**
- Приложение использует архитектуру MVVM
- Repository паттерн для абстракции источников данных
- Локальная база данных (Room + SQLCipher) для офлайн-работы
- Firebase Firestore для синхронизации и резервного копирования
- Dagger Hilt для dependency injection

### 5.2. Структура БД

**Локальная база данных (Room):**

**users:**
```kotlin
{
    id: String (PK),
    email: String,
    name: String,
    role: UserRole (USER/ADMIN),
    pinCode: String?,
    biometricEnabled: Boolean,
    isBlocked: Boolean,
    createdAt: Long
}
```

**transactions:**
```kotlin
{
    id: String (PK),
    userId: String (FK),
    amount: Double,
    type: TransactionType (INCOME/EXPENSE),
    categoryId: String (FK),
    date: Long,
    description: String,
    isSynced: Boolean,
    createdAt: Long
}
```

**categories:**
```kotlin
{
    id: String (PK),
    name: String,
    type: TransactionType (INCOME/EXPENSE),
    isSystem: Boolean,
    createdBy: String,
    createdAt: Long
}
```

**budgets:**
```kotlin
{
    id: String (PK),
    userId: String (FK),
    categoryId: String? (FK, nullable),
    amount: Double,
    period: BudgetPeriod (WEEK/MONTH/YEAR),
    startDate: Long,
    createdAt: Long
}
```

**financial_goals:**
```kotlin
{
    id: String (PK),
    userId: String (FK),
    name: String,
    targetAmount: Double,
    currentAmount: Double,
    deadline: Long,
    description: String,
    isCompleted: Boolean,
    createdAt: Long
}
```

**Firebase Firestore коллекции:**
- `users` — синхронизация пользователей
- `transactions` — синхронизация транзакций
- `categories` — синхронизация категорий
- `budgets` — синхронизация бюджетов
- `financial_goals` — синхронизация финансовых целей

---

## 6. API / Endpoints

**Firebase Authentication:**
- `createUserWithEmailAndPassword()` — регистрация
- `signInWithEmailAndPassword()` — вход
- `sendPasswordResetEmail()` — восстановление пароля
- `signOut()` — выход

**Firebase Firestore:**
- `collection("users").document(userId).set()` — сохранение пользователя
- `collection("users").document(userId).get()` — получение пользователя
- `collection("users").document(userId).update()` — обновление пользователя
- `collection("users").document(userId).delete()` — удаление пользователя
- `collection("transactions").document(transactionId).set()` — сохранение транзакции
- `collection("categories").document(categoryId).set()` — сохранение категории
- `collection("budgets").document(budgetId).set()` — сохранение бюджета
- `collection("financial_goals").document(goalId).set()` — сохранение финансовой цели

**Локальные операции (Room):**
- Все CRUD операции через DAO интерфейсы
- Flow для реактивного обновления UI

---

## 7. UI/UX: основные экраны + требования

**Экран авторизации/регистрации:**
- Логотип приложения "FinanceFlow"
- Переключение между входом и регистрацией
- Поля: Email, Пароль, Имя (при регистрации)
- Кнопка входа/регистрации
- Ссылка на восстановление пароля

**Главная страница:**
- Текущий баланс (доходы - расходы)
- Карточки с доходами и расходами
- Последние 5 транзакций
- Активные финансовые цели (первые 3)
- Кнопка добавления операции (FAB)
- Навигационная панель внизу

**Экран операций:**
- Список всех транзакций
- Фильтрация по типу (доход/расход)
- Сортировка по дате
- Навигационная панель внизу

**Экран добавления транзакции:**
- Выбор типа (доход/расход)
- Поле суммы
- Выбор категории (чипы)
- Поле описания
- Кнопка сохранения

**Экран статистики:**
- Выбор периода (неделя/месяц/год)
- Общие доходы и расходы
- Итоговый баланс
- Расходы по категориям с названиями
- Навигационная панель внизу

**Экран категорий:**
- Список всех категорий (системные и пользовательские)
- Отметка системных категорий
- Кнопка добавления категории
- Удаление пользовательских категорий (с подтверждением)
- Навигационная панель внизу

**Экран финансовых целей:**
- Список всех целей
- Прогресс-бары для каждой цели
- Кнопка добавления цели
- Выбор срока выполнения
- Кнопка "Пополнить" для каждой цели
- Удаление с подтверждением
- Навигационная панель внизу

**Экран профиля:**
- Данные пользователя (имя, email)
- Настройка PIN-кода
- Включение/выключение биометрии
- Кнопка выхода
- Кнопка админ-панели (для администраторов)

**Админ-панель:**
- Вкладки: Пользователи, Категории, Статистика
- Управление пользователями (блокировка, удаление)
- Управление системными категориями (CRUD)
- Агрегированная статистика
- Уведомления о действиях (снизу, на русском)

**Дизайн:**
- Минималистичный дизайн в стиле Material Design 3
- Светлая тема (темная тема опционально)
- Простая типографика
- Плавные анимации переходов
- Адаптивный layout для разных размеров экранов
- Цветовая схема: синий для доходов, красный для расходов

---

## 8. Тестирование

**Unit-тесты:**
- Проверка корректности логики ViewModels
- Тестирование репозиториев
- Валидация данных
- Тестирование расчетов (баланс, статистика)

**Интеграционное тестирование:**
- Сценарии: "регистрация → добавление транзакции → просмотр статистики"
- Синхронизация локальной БД с Firebase
- Офлайн-режим и последующая синхронизация

**UI-тестирование:**
- Проверка адаптивности интерфейса
- Тестирование навигации
- Проверка работы всех экранов
- Тестирование диалогов и уведомлений

**Регрессионное тестирование:**
- Перед каждым релизом
- Проверка критических функций
- Тестирование на разных версиях Android

---

## 9. Релиз

**Репозиторий:**
- GitHub (ветвление по feature-branch)
- Основная ветка: `main`
- Ветки разработки: `develop`, `feature/*`, `fix/*`

**CI/CD:**
- Автоматические сборки APK через GitHub Actions (опционально)
- Проверка кода перед merge

**Бета-тестирование:**
- Google Play Internal Testing
- Тестирование на реальных устройствах

**Финальный релиз:**
- Публикация в Google Play Store
- Возможная публикация в RuStore

---

## 10. Безопасность и приватность

**Безопасность данных:**
- Все соединения через HTTPS
- Шифрование локальной базы данных (SQLCipher)
- Безопасное хранение PIN-кода (не в открытом виде)
- Валидация всех входных данных

**Контроль доступа:**
- Firebase Security Rules для контроля доступа к данным
- Проверка прав доступа на уровне приложения
- Разделение данных по пользователям

**Приватность:**
- Возможность полного удаления учётной записи
- Удаление всех связанных данных при удалении аккаунта
- Минимизация сбора персональных данных
- Прозрачная политика конфиденциальности

**Обработка ошибок:**
- Все ошибки обрабатываются без крашей приложения
- Логирование ошибок для отладки
- Понятные сообщения об ошибках на русском языке

---

## 11. Роадмап / план по дням с конкретными датами

**Sprint 0 (Настройка и планирование):**
- Анализ требований и создание ТЗ
- Настройка окружения разработки
- Создание структуры проекта
- Настройка Firebase
- Дизайн UI/UX макетов

**Sprint 1 (Базовая функциональность):**
- Реализация аутентификации (регистрация, вход, восстановление пароля)
- Настройка архитектуры (MVVM, Hilt, Room)
- Создание моделей данных
- Реализация экрана профиля
- Настройка навигации

**Sprint 2 (Транзакции и категории):**
- Реализация добавления/редактирования/удаления транзакций
- Управление категориями (системные и пользовательские)
- Главный экран с балансом и последними транзакциями
- Экран списка операций
- Интеграция с Firebase для синхронизации

**Sprint 3 (Статистика и бюджеты):**
- Реализация экрана статистики
- Фильтрация по периодам
- Расходы по категориям
- Управление бюджетами
- Визуализация данных

**Sprint 4 (Финансовые цели и безопасность):**
- Реализация финансовых целей
- PIN-код и биометрическая аутентификация
- Шифрование базы данных (SQLCipher)
- Офлайн-режим
- Улучшение обработки ошибок

**Sprint 5 (Админ-панель):**
- Реализация админ-панели
- Управление пользователями
- Управление системными категориями
- Агрегированная статистика
- Уведомления о действиях

**Sprint 6 (Тестирование и оптимизация):**
- Unit-тестирование
- Интеграционное тестирование
- UI-тестирование
- Оптимизация производительности
- Исправление багов

**Final (Финальная подготовка):**
- Финальные исправления
- Подготовка к релизу
- Создание документации
- Сдача проекта

---

## 12. Уникальные функции проекта

**Офлайн-режим:**
- Полная функциональность приложения без подключения к интернету
- Автоматическая синхронизация при появлении интернета
- Локальное хранение в зашифрованной базе данных

**Безопасность:**
- Шифрование локальной базы данных (SQLCipher)
- PIN-код для дополнительной защиты
- Биометрическая аутентификация (FaceID/TouchID)
- Безопасная синхронизация через Firebase

**Финансовые цели:**
- Создание и отслеживание финансовых целей
- Визуализация прогресса
- Пополнение целей
- Отображение активных целей на главном экране

**Гибкое управление категориями:**
- Системные категории (доступны всем)
- Пользовательские категории
- Разделение на доходы и расходы

**Админ-панель:**
- Управление пользователями и категориями
- Агрегированная статистика
- Модерация контента

**Русскоязычный интерфейс:**
- Полная локализация на русский язык
- Форматирование валюты в рублях
- Форматирование дат в российском формате

**Удобная навигация:**
- Навигационная панель всегда видна на основных экранах
- Быстрый доступ ко всем разделам
- Интуитивная структура приложения

---

## Приложения

### Приложение А: Глоссарий терминов

- **Транзакция** — запись о доходе или расходе
- **Категория** — классификация транзакций (например, "Продукты", "Транспорт")
- **Бюджет** — установленный лимит расходов на определенный период
- **Финансовая цель** — целевая сумма, которую пользователь хочет накопить к определенной дате
- **Синхронизация** — процесс обмена данными между локальной БД и облаком
- **Офлайн-режим** — работа приложения без подключения к интернету

### Приложение Б: Список экранов

1. Экран авторизации/регистрации
2. Главная страница
3. Экран операций
4. Экран добавления транзакции
5. Экран статистики
6. Экран категорий
7. Экран финансовых целей
8. Экран профиля
9. Админ-панель (для администраторов)

---

**Версия документа:** 1.0  
**Дата создания:** 2025  
**Последнее обновление:** 2025




